# フロントエンド( Vue )の単体テスト( Jest )のテスト方針とケース作成とテストコード作成

## きっかけ
2020年の9月から社内でお試しでアジャイル開発手法を取り入れてみよう、という試みの元に素人エンジニアが5人集められました。Javascript が書けるのが私だけということもあり、フロントエンド周りはまるっと担当になったので、コーディングからテストまで任されることになりました。フロントエンド( Vue )は趣味程度でやっていたのですが、テストコードは書いたことはないため(趣味でテストコード書くやつなんていないので当たり前...)、試行錯誤でした。3ヶ月ほど経ち、テスト方針・テストケース作成・テストコード作成の一通りを経験したので、ここらで言語化して記録しようと思い、この記事を書いています。

## 前提
- 単体テストとは?  
この記事では、フロントエンドに限定された範囲でのテストを意味しています。私のプロジェクトでは、フロントエンドと API サーバーがアーキテクチャ上に存在しますが、フロントエンドと API サーバー間の確認は連結テストの範囲です。現場ごとに範囲の定義が異なる、まずは範囲の認識を合わせるところから。

- 単体テストの呼び方  
一般的には Unit Test のほうが使われている雰囲気を感じ取っていますが、社内では単体テストと呼ぶ派閥が強いので、私は単体テストと呼びます。

- 単体テスト = 自動化  
基本的には単体テストは Jest によるテストコードの実行を指しています。手動による単体テストは、明示的に手動の単体テストと記載しています。

- TDD（テスト駆動開発）ではない  
この記事では、一切、テスト駆動開発（TDD）には触れていないです。そもそも私が TDD にあまり詳しくないです。開発工程はオーソドックスに、設計 → 開発 → テストです。


## 単体テストを実施する目的
機能追加時のデグレードの回避です。色々と議論の余地はありそうですが、私のプロジェクトでは、機能追加をする上のノンデグレーションテストにかかる工数の増加を防ぐためです。そのため、1回目のリリースまでは、ほとんど手動による単体テストでした。


<!-- 
## そもそも単体テストってするべきか？
アジャイル開発チーム内でまず最初に話したことから書きます。
単体テストをするべきか。これは開発対象のシステムの重要度によって大きく変わります。今回の開発対象は社内向けの業務で使用するシステムであり、システムが止まれば被害は甚大だが、業務の代替手段はある、という立ち位置のシステムでした。求められる品質のレベルは、感覚だと3段階中の2でしょうか。東証の発注システムのように止まれば日本経済、いや、世界に影響を及ぼすような外部に公開されたシステムではないが、一担当者の業務がちょっと楽になる便利ツールほど軽くもない。求められる品質上、単体テストは実施することになりました。本題から逸れるため深くは書きませんが、求められる品質のレベルを考慮し、単体テスト・連結テスト (Unit Test / Integration Test) までは実施するが、総合テスト (System Test) は実施しない、という結論になりました。

## テストって時間かかる
テストを実施する、ということになれば開発にかかる見積もりの時間は大幅に増えます。プロダクトオーナーにそのことを伝えることが次のミッションでした。

- 設計(30%)
- 開発(30%)
- テスト(40%)
-->

